<link rel="stylesheet" href="/css/addFormPage.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css">

<div class="container">
  <form action="/project/createProjectIssue/<%= projectId%>" method="post">
    <div class="row">
      <div class="col-25">
        <label for="title">Title</label>
      </div>
      <div class="col-75">
        <input type="text" id="title" name="title" placeholder="Your Title.." required>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="author">Author</label>
      </div>
      <div class="col-75">
        <input type="text" id="author" name="author" placeholder="Author name.." required>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="label">Label</label>
      </div>
      <div class="col-75">
        <select id="label" class="chosen-select" multiple name="label">
            <% projectLa.forEach((value, index) => { %>
                          <option value="<%= value%>"><%= value%></option>
<% }); %>

        </select>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="customLabel">Custom Label</label>
      </div>
      <div class="col-75">
        <input type="text" id="customLabel" name="customLabel" placeholder="Enter custom label">
        <button type="button" onclick="addCustomOption()">Add Option</button>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="description">Description</label>
      </div>
      <div class="col-75">
        <textarea id="description" name="description" placeholder="Write something.." style="height:200px" required></textarea>
      </div>
    </div>
    <br>
    <div class="row">
      <input type="submit" value="Add Issue">
    </div>
  </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>
<script>
  $(document).ready(function() {
    $(".chosen-select").chosen();
  });

  function addCustomOption() {
    var customLabel = document.getElementById("customLabel").value;
    var select = document.getElementById("label");
    var option = document.createElement("option");
    option.text = customLabel;
    option.value = customLabel;
    select.add(option);
    
    // Destroy and reinitialize the Chosen plugin
    $(".chosen-select").chosen("destroy");
    $(".chosen-select").chosen();
    
    document.getElementById("customLabel").value = "";
  }
</script>
